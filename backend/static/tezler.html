<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tezler - ACADEX</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body class="bg-light">

<nav class="navbar navbar-expand-lg navbar-dark sticky-top">
    <div class="container">
        <a class="navbar-brand fw-bold" href="index.html"><i class="fa fa-layer-group me-2"></i>ACADEX</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar"><span class="navbar-toggler-icon"></span></button>
        <div class="collapse navbar-collapse" id="navbar">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item"><a href="yayinlar.html" class="nav-link">Yayınlar</a></li>
                <li class="nav-item"><a href="projeler.html" class="nav-link">Projeler</a></li>
                <li class="nav-item"><a href="arastirmacilar.html" class="nav-link">Araştırmacılar</a></li>
                <li class="nav-item"><a href="tezler.html" class="nav-link active">Tezler</a></li>
                <li class="nav-item ms-lg-3"><a href="login.html" class="btn btn-light text-primary fw-bold btn-sm mt-1 mt-lg-0">Giriş Yap</a></li>
            </ul>
        </div>
    </div>
</nav>

<main class="py-5">
    <div class="container">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="fw-bold text-primary">Lisansüstü Tezler</h2>
            <span class="badge bg-primary fs-6" id="toplam-sayi">Yükleniyor...</span>
        </div>
        <div class="card shadow-sm border-0">
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-hover table-striped mb-0 align-middle">
                        <thead class="table-primary text-white">
                            <tr>
                                <th class="py-3 ps-4">Tez Başlığı</th>
                                <th class="py-3">Öğrenci</th>
                                <th class="py-3">Danışman</th>
                                <th class="py-3">Tür</th>
                                <th class="py-3 text-center">İşlem</th>
                            </tr>
                        </thead>
                        <tbody id="tezler-table"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</main>

<div class="modal fade" id="tezModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title fw-bold">Tez Bilgisi</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body p-4">
                <div class="text-center mb-4">
                    <i class="fa fa-graduation-cap text-danger fa-4x"></i>
                    <h5 class="fw-bold mt-3" id="modalBaslik">...</h5>
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item d-flex justify-content-between"><span>Öğrenci:</span> <strong id="modalOgrenci">...</strong></li>
                    <li class="list-group-item d-flex justify-content-between"><span>Danışman:</span> <strong id="modalDanisman">...</strong></li>
                    <li class="list-group-item d-flex justify-content-between"><span>Tür:</span> <span class="badge bg-warning text-dark" id="modalTur">...</span></li>
                    <li class="list-group-item d-flex justify-content-between"><span>Yıl:</span> <strong id="modalYil">...</strong></li>
                </ul>
            </div>
            <div class="modal-footer border-0">
                <button type="button" class="btn btn-secondary w-100" data-bs-dismiss="modal">Kapat</button>
            </div>
        </div>
    </div>
</div>

<footer class="bg-white border-top py-4 mt-auto">
    <div class="container text-center small text-muted">© 2026 ACADEX. Tüm hakları saklıdır.</div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/js/bootstrap.bundle.min.js"></script>
<script>
async function fetchTezler() {
    try {
        const res = await fetch('https://acadex-0lpc.onrender.com/theses');
        const data = await res.json();
        document.getElementById('toplam-sayi').innerText = data.length + " Tez";
        const tbody = document.getElementById('tezler-table');
        tbody.innerHTML = '';
        data.forEach(t => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td class="fw-bold ps-4">${t.title}</td>
                <td>${t.student}</td>
                <td>${t.advisor_name}</td>
                <td><span class="badge bg-warning text-dark">${t.type}</span></td>
                <td class="text-center">
                    <button onclick="detay('${t.title}', '${t.student}', '${t.advisor_name}', '${t.type}', '${t.year}')" class="btn btn-sm btn-danger shadow-sm"><i class="fa fa-eye"></i></button>
                </td>`;
            tbody.appendChild(row);
        });
    } catch (e) { console.error(e); }
}
function detay(baslik, ogr, danisman, tur, yil) {
    document.getElementById('modalBaslik').innerText = baslik;
    document.getElementById('modalOgrenci').innerText = ogr;
    document.getElementById('modalDanisman').innerText = danisman;
    document.getElementById('modalTur').innerText = tur;
    document.getElementById('modalYil').innerText = yil;
    new bootstrap.Modal(document.getElementById('tezModal')).show();
}
fetchTezler();
</script>
</body>
</html>